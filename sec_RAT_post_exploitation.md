#### 后渗透 - Persistence

权限维持 
* [Persistence - MITRE ATT&CK™](https://attack.mitre.org/tactics/TA0003/)
  * 通用
    * 白利用 - 利用系统或普通程序的白文件进行权限维持
    * Web Shell - web服务开启即可进行权限维持
    * 系统账号 - (合法功能 无任何恶意代码)信息搜集、窃取等方式得到登录凭据
    * 远程服务 - (合法功能 无任何恶意代码)允许用户从外部位置连接到企业内部网络资源 如VPN等
  * Windows
    * 创建帐号	- (合法功能 无任何恶意代码)具有足够访问级别的攻击者可以创建本地系统或域帐户
    * 注册表 - 如更改默认文件关联、创建新服务、修改现有服务...
    * 辅助功能 - 利用windows登录街面的的辅助功能
    * bootkit - 修改硬盘驱动器的引导扇区 包括主引导记录(MBR) 卷引导记录(VBR)
    * Office应用程序的启动 - 启动基于Office的应用程序时可以使用多种机制进行维持
    * 快捷方式修改 - 创建一个新的快捷方式、修改已有快捷方式的指向
    * WMI事件订阅 - 攻击者可以使用WMI的功能来订阅事件并在事件发生时执行任意代码
    * ...
  * linux
    * 创建帐号	- (合法功能 无任何恶意代码)
    * rootkit - 如利用LKM加载到linux内核
    * Systemd Service	- systemd服务管理器通常用于管理后台守护进程(background daemon processes,也叫做services)和其他系统资源
    * Port Knocking - 发送约定好的数据包到某正常端口 使后门程序使用iptables等程序打开其他端口
    * `.bash_profile` 和 `.bashrc` - `~/.bash_profile`和`~/.bashrc`在打开新shell或用户登录时在用户上下文中执行,以便正确设置其环境.`~/.bash_profile`针对登录shell执行 `~/.bashrc`针对交互式非登录shell执行.
    
    * ...
  * macOS
    * 修改plist文件 - Property list (plist)文件包含macOS用于配置应用程序和服务的所有信息
    * Dylib劫持 - (类似Windows的DLL劫持) macOS查找所需的动态库(dylib) 如果某程序指定了不明确的路径且未使用"库验证"机制 容易被攻击者利用
    * ...
 
|名称|属性|针对目标|描述|
|:-------------:|--|--|-----|
|[gentilkiwi/mimikatz](https://github.com/gentilkiwi/mimikatz)|C|Windows| 7k★ 从内存中提取plaintexts passwords/hash/PIN code/kerberos tickets|
|[PowerShellMafia/PowerSploit](https://github.com/PowerShellMafia/PowerSploit)|PowerShell|Windows| 5k★ 综合类 A PowerShell Post-Exploitation Framework.代码执行 权限维持 AVbypass 提升权限 信息搜集|
|[samratashok/nishang](https://github.com/samratashok/nishang)|PowerShell|Windows| 3k★ 综合类 渗透测试全阶段都有用|
|[secabstraction/PowerCat](https://github.com/secabstraction/PowerCat)|PowerShell|Windows| 类似netcat的TCP/IP瑞士军刀 功能:File Transfer、Shells、UDP and SMB、SSL、Relays、Generate Payloads、Misc|
|[bitsadmin/nopowershell](https://github.com/bitsadmin/nopowershell)|C#|windows| 用C#重新构建的PowerShell.任何PowerShell日志记录机制都无法记录. 在Cobalt Strike中复制NoPowerShell.exe和NoPowerShell.cna到Cobalt Strike的`scripts`文件夹 可实现从内存执行命令. 还可以通过`rundll32`运行|
|[zerosum0x0/koadic](https://github.com/zerosum0x0/koadic)|python|Windows| 1k★ Koadic C3 COM Command & Control - JScript RAT|
|[n1nj4sec/pupy](https://github.com/n1nj4sec/pupy)|python2| Windows/linux | 4k★ #RAT Pupy is a cross-platform remote administration and post-exploitation tool|
|[EggShell](https://github.com/neoneggplant/EggShell)|python|macOS/Linux| #RAT iOS(Jailbroken)/macOS/Linux(OnlyFileManage)|
|[Ne0nd0g/merlin](https://github.com/Ne0nd0g/merlin)|golang|all| 2k★ #RAT  a cross-platform post-exploitation [HTTP/2] Command & Control  server and agent|
|[tiagorlampert/CHAOS](https://github.com/tiagorlampert/CHAOS)|golang|all| 1k★ #RAT cross-platform keylogger|
|[rek7/fireELF](https://github.com/rek7/fireELF)|python|linux| #Fileless 不落地 从内存中完全运行linux elf可执行文件[原理参考](https://magisterquis.github.io/2018/03/31/in-memory-only-elf-execution.html)|
|[fbkcs/ThunderDNS](https://github.com/fbkcs/ThunderDNS)|python3/PowerShell/bash|linux/Win| #backdoor 通过DNS协议转发TCP流量(forward TCP traffic over DNS protocol) 支持socks5|
|[dnscat2](https://github.com/iagox86/dnscat2)|C++ C Ruby|linux Win32| #backdoor #DNS|
|[backdoors](https://github.com/iamckn/backdoors)|sh|linux|#backdoor [利用SSH日志触发的后门分析](http://www.freebuf.com/articles/system/185942.html)|
|[outflanknl/EvilClippy](https://github.com/outflanknl/EvilClippy)|C#|Windows|生成含shellcode的office文件. A cross-platform assistant for creating malicious MS Office documents. Can hide VBA macros, stomp VBA code (via P-Code) and confuse macro analysis tools. Runs on Linux, OSX and Windows.|


#### 后渗透 - 白利用
 
系统自带程序的白利用

|名称|针对目标|描述|
|:-------------:|--|-----|
| [LOLBAS](https://lolbas-project.github.io/)|windows|攻击者滥用windows自带的Binaries Scripts Libraries 进行后渗透：权限维持、文件传输.. [项目地址](https://github.com/LOLBAS-Project/LOLBAS)|
| [UltimateAppLockerByPassList](https://github.com/api0cradle/UltimateAppLockerByPassList)|windows|绕过AppLocker的最常用技术|
| [GTFOBins](https://gtfobins.github.io/)|linux|攻击者滥用linux自带二进制文件的合法功能 绕过本地安全限制 进行后渗透操作|

普通应用程序的白利用

DLL Hijacking

#### 后渗透 - rootkit

|名称|属性|针对目标|描述|
|:-------------:|--|--|-----|
|rootkit [m0nad/Diamorphine](https://github.com/m0nad/Diamorphine)|C|Linux Kernels 2.6.x/3.x/4.x (x86 x86_64)|#backdoor #LKM #rootkit 需要ROOT权限 隐藏指定进程与通信.|
|rootkit [f0rb1dd3n/Reptile](https://github.com/f0rb1dd3n/Reptile)|C|linux|#backdoor #LKM #rootkit 参考Diamorphine开发. 以下系统下运行测试通过Debian 9/Ubuntu 18.04.1/Centos 7|


#### 后渗透 - 目标网络信息搜集

|名称|属性|针对目标|描述|
|:-------------:|--|--|-----|
|[LaZagne](https://github.com/AlessandroZ/LaZagne)|python|windows/Linux/macOS| #凭证恢复(Credentials recovery):系统口令/浏览器软件/邮箱软件/wifi|
|[djhohnstein/SharpWeb](https://github.com/djhohnstein/SharpWeb)|C# .exe|Windows|#浏览器凭证获取 .NET 2.0 CLR project. Retrieve All Saved Browser Credentials.|

#### 其他文章

[Ping Power - ICMP隧道](https://medium.com/bugbountywriteup/ping-power-icmp-tunnel-31e2abb2aaea)
